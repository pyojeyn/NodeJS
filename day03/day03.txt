ì‚¬ìš©ì ì •ì˜ ëª¨ë“ˆ
- ì‚¬ìš©ìê°€ ì§ì ‘ ë§Œë“¤ì–´ ì½”ë“œë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì‘ì„±í•œ ëª¨ë“ˆ 
1.
    module.export = () => {
        ëª¨ë“ˆ ì½”ë“œ
        ....
        ....
    }
    - ëª¨ë“ˆ ì‚¬ìš©ë°©ë²•
    const ê°ì²´ëª… = require('íŒŒì¼ëª…');

2.
    ëª¨ë“ˆ ì½”ë“œ 
    ...
    ...
    module.export = ë³€ìˆ˜ëª…;
    - ëª¨ë“ˆ ì‚¬ìš© ë°©ë²•
    const ê°ì²´ëª… = require('ë³€ìˆ˜ëª…');

âœ” JSON.parse()
    json í¬ë©§ìœ¼ë¡œ ë˜ì–´ ìˆëŠ” ë¬¸ìì—´ì„ json ê°ì²´ë¡œ ë³€í™˜ 
    -JSON.parse(ë¬¸ìì—´);
âœ” JSON.stringify()
    json ê°ì²´ë¥¼ json í¬ë©§ì˜ ë¬¸ìì—´ë¡œ ë³€í™˜
    -JSON.stringify(json ê°ì²´);      

ğŸ‘½cookie-parser ëª¨ë“ˆ    (ì¤‘ìš”í•¨ !)
- ì¿ í‚¤ë¥¼ ì‰½ê²Œ ì„¤ì •í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ëª¨ë“ˆ 
- ìµìŠ¤í”„ë ˆìŠ¤ ê°ì²´ì— ë¯¸ë“¤ì›¨ì–´ë¡œ ë“±ë¡ 
- npm i cookie-parser

cookieParser() : ì¼ë°˜ ì¿ í‚¤ë¥¼ ì‚¬ìš© 
cookieParser('ì•”í˜¸í™”í•˜ê¸° ìœ„í•œ ë¬¸ì') : ì•”í˜¸í™”ëœ ì¿ í‚¤ë¥¼ ì‚¬ìš©

ì¿ í‚¤ ì„¤ì •
res.cookie('í‚¤','ê°’',{ì¿ í‚¤ ìƒì„± ì˜µì…˜});

ì¿ í‚¤ ìƒì„± ì˜µì…˜
maxAge : ë§Œë£Œì‹œê°„ì„ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ì„¤ì •
expires : ë§Œë£Œì‹œê°„ì„ GMT ì‹œê°„ìœ¼ë¡œ ì„¤ì •
path : cookieì˜ ê²½ë¡œë¥¼ ì„¤ì •. ê¸°ë³¸ì„¤ì •ì€ "/"
signed : true(ì•”í˜¸í™”í•´ì„œ ì¿ í‚¤ë¥¼ ì €ì¥)

ì¿ í‚¤ ì¡°íšŒ 
req.cookies.cookie : ì¼ë°˜ ì¿ í‚¤ 
req.signedCookies.cookie : ì•”í˜¸í™”ëœ ì¿ í‚¤ 

ì¿ í‚¤ ì‚­ì œ
res.clearCookie('í‚¤',{path:'ê²½ë¡œ'});


express-session ëª¨ë“ˆ
- ì„¸ì…˜ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìµìŠ¤í”„ë ˆìŠ¤ ë¯¸ë“¤ì›¨ì–´ ëª¨ë“ˆ

app.use(session({ì„¸ì…˜ëª¨ë“ˆì˜ ì˜µì…˜}));

ì„¸ì…˜ëª¨ë“ˆì˜ ì˜µì…˜
- recret : ì¿ í‚¤ë¥¼ ì„ì˜ë¡œ ë³€ì¡°í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ê°’. ì„¸ì…˜ì„ ì•”í˜¸í™”í•˜ì—¬ ì €ì¥ 
- resave : ì„¸ì…˜ì„ ì–¸ì œë‚˜ ì €ì¥í•˜ê³  ìˆì„ì§€ ì„¤ì •í•˜ëŠ” ê°’. ì´ ê°’ì€ falseë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥
- saveUninitialized : ì„¸ì…˜ì´ ì €ì¥ë˜ê¸° ì „ì— saveUninitialized ìƒíƒœë¡œ ë¯¸ë¦¬ ë§Œë“¤ì–´ì„œ ì €ì¥
    default : true, sessionì„ ê°•ì œë¡œ ì €ì¥, ì•„ë¬´ ë‚´ìš©ì—†ëŠ” sessionì´ ê³„ì† ì €ì¥
    false : ë¹ˆ ì„¸ì…˜ ê°ì²´ê°€ ìŒ“ì´ëŠ” ê²ƒì„ ë°©ì§€
- npm i express-session


ì„¸ì…˜ ì´ˆê¸° ì„¤ì •
const ê°ì²´ëª… = req.session; 
ê°ì²´ëª….ë³€ìˆ˜ = ê°’;

ì„¸ì…˜ ë³€ìˆ˜ ì‚¬ìš©
ê°ì²´ëª….ë³€ìˆ˜; 

ì„¸ì…˜ ì‚­ì œ 
req.session.destroy( ()=>{
    ì„¸ì…˜ ì‚­ì œì‹œ ì²˜ë¦¬í•  ë¬¸ì¥;
    ....
});


NoSQL
- Not only SQLì˜ ì•½ì
- RDMS(ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤)ì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìƒˆë¡œìš´ í˜•íƒœì˜ ë°ì´í„°ë² ì´ìŠ¤
- ì‹¤ì‹œê°„ ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ì„ ê°ë‹¹(NoSQLì€ ì„±ëŠ¥ì„ ìµœìš°ì„ ìœ¼ë¡œ ë§Œë“¤ì–´ì§)
- ë©”ì‹œì§• ì‹œìŠ¤í…œë“± ì— ë§ì´ ì‚¬ìš©

MongoDB ë‹¤ìš´ë¡œë“œ 
- NoSQL ì´ê¸° ë•Œë¬¸ì— ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸” ê°œë…ì´ ì—†ìŒ
- ë°ì´í„°ê°€ ëª¨ì¸ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¥¼ ì»¬ë ‰ì…˜ì´ë¼ê³  ë¶€ë¦„
- ë°ì´í„°ë¥¼ ì •í•´ ë†“ì€ ì»¬ëŸ¼ì˜ í˜•íƒœë¡œ ì»¬ë ‰ì…˜ì— ë„£ì–´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ì—†ìŒ -> ìŠ¤í‚¤ë§ˆê°€ ì—†ë‹¤ëŠ” ëœ»
- ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì»¬ë ‰ì…˜ë“¤ì˜ ì§‘í•©
- ì»¬ë ‰ì…˜ì€ ì—¬ëŸ¬ê°œì˜ ë¬¸ì„œ ê°ì²´ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ 
    //â†“ ì»¬ë ‰ì…˜
    {"id":1, "userid":"apple", "userpw":"1111", "gender":"ì—¬ì"} //ë¬¸ì„œê°ì²´ document object
    {"id":2, "userid":"banana", "age":"25"}
    {"id":3, "name":"ì˜¤ë Œì§€", "birth":"2000-01-01"}
    
âœ” document -> collection -> database

document
- RDBMS ì˜ recordì™€ ë¹„ìŠ·í•œ ê°œë…
- ë°ì´í„° êµ¬ì¡°ê°€ í•œê°œ ì´ìƒì˜ key-value-pairë¡œ ì´ë£¨ì–´ì ¸ ìˆìŒ
- ë™ì ì¸ ìŠ¤í‚¤ë§ˆë¥¼ ê°€ì§€ê³  ìˆìŒ ë°ì´í„°ê°€ ë°”ë€”ìˆ˜ ìˆë‹¤ëŠ” ëœ»?
- ê°™ì€ collection ì•ˆì— ìˆëŠ” documentë¼ë¦¬ ë‹¤ë¥¸ ìŠ¤í‚¤ë§ˆë¥¼ ê°€ì§€ê³  ìˆì„ ìˆ˜ ìˆìŒ    

collection
- documentì˜ ê·¸ë£¹
- collection ë‚´ë¶€ì— documentë“¤ì´ ìœ„ì¹˜
- table ê³¼ ë¹„ìŠ·í•œ ê°œë…ì´ì§€ë§Œ, RDBMSì™€ ë‹¬ë¦¬ ìŠ¤í‚¤ë§ˆë¥¼ ë”°ë¡œ ê°€ì§€ì§€ ì•ŠìŒ;


MongoDB í™˜ê²½ì„¤ì •
- C:\Program Files\MongoDB\Server\5.0\bin

MongoDBì˜ ë¬¸ë²•

ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
show dbs;

ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
use ë°ì´í„°ë² ì´ìŠ¤ëª…

    use jcp;

    âœ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—†ìœ¼ë©´ ìƒì„±, ìˆìœ¼ë©´ ì„ íƒ
    âœ” ë°ì´í„°ë² ì´ìŠ¤ì— ìë£Œê°€ ì—†ì„ ê²½ìš°, show dbsì—ì„œ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ

ì»¬ë ‰ì…˜ ìƒì„±
db.createCollection('ì»¬ë ‰ì…˜ëª…');
    db.createCollection('textCollection');

ì»¬ë ‰ì…˜ í™•ì¸
show collections;

ì»¬ë ‰ì…˜ ì‚­ì œ
db.ì»¬ë ‰ì…˜ëª….drop();

ì—°ìŠµìš© ì»¬ë ‰ì…˜ ë§Œë“¤ê¸°
    db.createCollection("member");

document ì¶”ê°€
db.ì»¬ë ‰ì…˜ëª….insert(ê°ì²´); // ê°ì—ëŠ” jsì˜ ê°ì²´ 
    db.member.insert({'userid':'apple', 'userpw':'1111', 'name':'ê¹€ì‚¬ê³¼'});

document í™•ì¸
db.ì»¬ë ‰ì…˜ëª….find();

    { "_id" : ObjectId("613feba486badee9a6a8b676"), "userid" : "apple", "userpw" : "1111", "name" : "ê¹€ì‚¬ê³¼" }
    MongoDBëŠ” ë°ì´í„°ë¥¼ ë„£ê²Œ ë˜ë©´ _idë¼ëŠ” ìš”ì†Œë¥¼ ë„£ì–´ì¤€ë‹¤. document ë™ì¼í•˜ê²Œ ë“¤ì–´ê°ˆ ë•Œ êµ¬ë¶„í•´ì£¼ê¸° ìœ„í•´ì„œ 
    âœ”"_id" : ObjectId("613feba486badee9a6a8b676")ëŠ” documentì˜ ìœ ì¼í•œ í‚¤ë¡œ ì“°ì´ëŠ” ê°’;

db.ì»¬ë ‰ì…˜ëª….find().pretty();
    db.member.find().pretty();




ì—°ìŠµìš© document ì¶”ê°€
db.member.insert({'userid':'banana', 'name':'ë°˜í•˜ë‚˜', 'gender':'ì—¬ì', 'point':500});
db.member.insert({'userid':'orange', 'userpw':'2222', 'name':'ì˜¤ë Œì§€', 'gender':'ë‚¨ì', 'point':700});
db.member.insert({'userid':'melon', 'userpw':'4444','name':'ì´ë©”ë¡ ', 'gender':'ë‚¨ì', 'point':300});
db.member.insert({'userid':'avocado', 'userpw':'3333', 'name':'ì•ˆê°€ë„', 'gender':'ë‚¨ì', 'point':200});
db.member.insert({'userid':'coconut', 'name':'ì½”ì½”ë„›', 'gender':'ë‚¨ì', 'point':600});
db.member.insert({'userid':'cherry', 'userpw':'5555','name':'ê¹€ì²´ë¦¬', 'gender':'ì—¬ì', 'point':500});
db.member.insert({'userid':'berry', 'name':'ë°°ì• ë¦¬', 'gender':'ì—¬ì', 'point':400});
db.member.insert({'userid':'watermelon', 'name':'ë°•ìˆ˜ë°•', 'gender':'ë‚¨ì', 'point':900});
db.member.insert({'userid':'jennyboo', 'userpw':'1111','name':'í‘œì œì¸', 'gender':'ì—¬ì', 'point':600});

documentì˜ ë¹„êµì—°ì‚°
$eq : ì£¼ì–´ì§„ ê°’ê³¼ ì¼ì¹˜í•˜ëŠ” ê°’ì„ ì°¾ìŒ(==)
$gt : ì£¼ì–´ì§„ ê°’ë³´ë‹¤ í° ê°’ì„ ì°¾ìŒ(>)
$gte : ì£¼ì–´ì§„ ê°’ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ ê°’ì„ ì°¾ìŒ(>=)
$lt : ì£¼ì–´ì§„ ê°’ë³´ë‹¤ ì‘ì€ ê°’ì„ ì°¾ìŒ(<)
$lte : ì£¼ì–´ì§„ ê°’ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ê°’ì„ ì°¾ìŒ(<=)
$ne : ì£¼ì–´ì§„ ê°’ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê°’ì„ ì°¾ìŒ (<>)
$in : ì£¼ì–´ì§„ ë°°ì—´ì•ˆì— ì†í•˜ëŠ” ê°’ì„ ì°¾ìŒ (in)
$nin : ì£¼ì–´ì§„ ë°°ì—´ì•ˆì— ì†í•˜ì§€ ì•ŠëŠ” ê°’ì„ ì°¾ìŒ (not in)


db.member.find({"point":{$gte:700}}).pretty();

documentì˜ ë…¼ë¦¬ì—°ì‚° 
$and : ì£¼ì–´ì§„ ëª¨ë“  ì¡°ê±´ì´ trueì¼ë•Œ trueì¸ ê²°ê³¼ë¥¼ ì°¾ìŒ
$or : ì£¼ì–´ì§„ ì¡°ê±´ì¤‘ í•˜ë‚˜ë¼ë„ trueì¼ë•Œ trueì¸ ê²°ê³¼ë¥¼ ì°¾ìŒ
$not : ì£¼ì–´ì§„ ì¡°ê±´ì˜ falseì¼ë•Œ trueë¡œ , trueì¼ë•Œ falseì¸ ê²°ê³¼ë¥¼ ì°¾ìŒ

ì•„ì´ë””ê°€ "watermelon"ì´ê³  ì´ë¦„ì´ "ë°•ìˆ˜ë°•"ì¸ memberë¥¼ ê²€ìƒ‰
db.member.find({$and:[{"userid":"watermelon"}, {"name":"ë°•ìˆ˜ë°•"}]}).pretty()

ë¬¸ì œ
1. ì´ë¦„ì´ "ì½”ì½”ë„›"ì¸ ë©¤ë²„ë¥¼ ê²€ìƒ‰
    db.member.find({"name":"ì½”ì½”ë„›"}).pretty();
2.í¬ì¸íŠ¸ê°€ 600ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ë©¤ë²„ë¥¼ ê²€ìƒ‰
    db.member.find({"point":{$lte:600}}).pretty();
3.ì•„ì´ë””ê°€ "apple"ë˜ëŠ” "cherry"ì¸ ë©¤ë²„ë¥¼ ê²€ìƒ‰
    db.member.find({$or:[{"userid":"apple"},{"userid":"cherry"}]}).pretty();
4.ì„±ë³„ì´ "ì—¬ì"ì´ê³  í¬ì¸íŠ¸ê°€ 500ì´ìƒì¸ ë©¤ë²„ë¥¼ ê²€ìƒ‰
    db.member.find({$and:[{"gender":"ì—¬ì"},{"point":{$gte:500}}]}).pretty();


documentì˜ ì •ë ¬
db.ì»¬ë ‰ì…˜ëª….find().sort(ê°ì²´);
    db.member.find().sort({"_id":-1}).pretty(); //ë‚´ë¦¼ì°¨ìˆœ 

    âœ” {"_id":-1} : keyëŠ” ë°ì´í„°ì˜ fieldì´ë¦„, valueì˜ ê°’ì€ 1(ì˜¤ë¦„ì°¨ìˆœ) ë˜ëŠ” -1(ë‚´ë¦¼ì°¨ìˆœ)
       ----- ---
       key   value 

documentì˜ ê°œìˆ˜ ì œí•œ
limit() : ì¶œë ¥í•  ë°ì´í„° ê°œìˆ˜ë¥¼ ì œí•œí•  ë•Œ ì‚¬ìš© 
db.ì»¬ë ‰ì…˜ëª….find().limit(ì¶œë ¥í•  ê°œìˆ˜);
    db.member.find().limit(3).pretty(); ë¨¼ì € ê°€ì…í•œ ì‚¬ëŒë¶€í„° ì„¸ëª… 

document ë°ì´í„° ìƒëµ í›„ ì¶œë ¥
skip() : ì¶œë ¥í•  ë°ì´í„°ì˜ ì‹œì‘ë¶€ë¶„ì„ ì„¤ì •í•  ê²½ìš° ì‚¬ìš© 
db.ì»¬ë ‰ì…˜ëª….find().skip(ìƒëµí•  ê°œìˆ˜);
    db.member.find().skip(2).pretty(); //ê¹€ì‚¬ê³¼, ë°˜í•˜ë‚˜ ë¹¼ê³ 

ë¬¸ì œ.
member ì»¬ë ‰ì…˜ì˜ ë°ì´í„°ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥
(ë‹¨, limitì™€ skip ì‚¬ìš©)
1.
    í‘œì œì¸  
    ë°•ìˆ˜ë°•
    ë°°ì• ë¦¬
db.member.find().limit(3).sort({"_id":-1}).pretty();
2. //ê·¸ë‹¤ìŒ 3ëª…
    ê¹€ì²´ë¦¬
    ì½”ì½”ë„›
    ì•ˆê°€ë„
db.member.find().skip(3).limit(3).sort({"_id":-1}).pretty();
3.
    ì´ë©”ë¡ 
    ì˜¤ë Œì§€
    ë°˜í•˜ë‚˜ 
db.member.find().skip(6).limit(3).sort({"_id":-1}).pretty();    
4. 
    ê¹€ì‚¬ê³¼    
db.member.find().skip(9).limit(3).sort({"_id":-1}).pretty();        

documentì˜ ìˆ˜ì •
1. íŠ¹ì • field ì—…ë°ì´íŠ¸
db.ì»¬ë ‰ì…˜ëª….update(ê°ì²´, {$set:ë°”ë€”ê°ì²´});
    db.member.update({"userid":"avocado"}, {$set:{name:"ì•ˆì¹´ë„"}});
2. document replace
db.ì»¬ë ‰ì…˜ëª….update(ë³€ê²½í•  ê°ì²´,ë°”ë€” ê°ì²´);
    db.member.udpate({"_id" : ObjectId("613ff1cd86badee9a6a8b684")}, {"userid" :"avocadu", "userpw":"5555", "name":"ì•ˆì¹´ë‘", "gender":"ë‚¨ì"});
3. íŠ¹ì • í•„ë“œ ì œê±°
db.ì»¬ë ‰ì…˜ëª….update(ë³€ê²½í•  ê°ì²´, {$unset:{ì œê±°í•  ê°ì²´}});
    db.member.update({"userid":"avocado"}, {$unset:{"name":1}});
    âœ” 1ì€ trueì˜ ì˜ë¯¸(ì‚­ì œ)

4. ì—¬ëŸ¬ documentì˜ íŠ¹ì • fieldë¥¼ ìˆ˜ì •
db.ì»¬ë ‰ì…˜ëª….update(ì ìš©í•  ê°ì²´, $set:{ìˆ˜ì •í•  ê°ì²´}, {multi: true});

pointê°€ 600ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ documentì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ "0000"ìœ¼ë¡œ ë³€ê²½
    db.member.update({point:{$gte:600}}, {$set:{"userpw":"0000"}}, {multi: true});




documentì˜ ì‚­ì œ
db.ì»¬ë ‰ì…˜ëª….remove(ê°ì²´)
    db.member.remove({"_id" : ObjectId("613ff1cd86badee9a6a8b684")});